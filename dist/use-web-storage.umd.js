(function(n,o){typeof exports=="object"&&typeof module<"u"?o(exports,require("react")):typeof define=="function"&&define.amd?define(["exports","react"],o):(n=typeof globalThis<"u"?globalThis:n||self,o(n.useWebStorage={},n.React))})(this,function(n,o){"use strict";function m(s,r,p="local",u=null){const t=p==="session"?window.sessionStorage:window.localStorage,[f,d]=o.useState(()=>{try{const e=t.getItem(s);if(!e)return r;const c=JSON.parse(e);return c.expiry&&Date.now()>c.expiry?(t.removeItem(s),r):c.data}catch(e){return console.error("useWebStorage read error:",e),r}});o.useEffect(()=>{try{const e={data:f,expiry:u?Date.now()+u:null};t.setItem(s,JSON.stringify(e))}catch(e){console.error("useWebStorage write error:",e)}},[s,f,t,u]),o.useEffect(()=>{const e=c=>{if(c.key===s)if(c.newValue){const a=JSON.parse(c.newValue);a.expiry&&Date.now()>a.expiry?(t.removeItem(s),d(r)):d(a.data)}else d(r)};return window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)},[s,t,r]);const w=o.useCallback(()=>{t.removeItem(s),d(r)},[s,t,r]),g=o.useCallback(()=>{t.clear(),d(r)},[t,r]);return[f,d,w,g]}n.useWebStorage=m,Object.defineProperty(n,Symbol.toStringTag,{value:"Module"})});
